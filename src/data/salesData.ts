/**
 * Sales Mock Data
 * Mock data para o Dashboard Comercial (US-404)
 */

import { SalesLead } from '@/types/virtual-office';

const STAGE_ORDER = ['prospecting', 'qualification', 'proposal', 'negotiation', 'closed_won'] as const;

export const salesMockData = {
  goal: {
    month: 'Feb 2026',
    target: 50000,
  },

  leads: [
    // Prospecção (12 leads)
    {
      id: 'lead-1',
      name: 'João Silva',
      company: 'Tech Solutions',
      email: 'joao@techsol.com',
      phone: '11987654321',
      stage: 'prospecting' as const,
      value: 5000,
      probability: 20,
      source: 'LinkedIn',
      notes: 'Initial contact, interested in consultation',
      created_at: '2026-02-10',
      position: 0,
    },
    {
      id: 'lead-2',
      name: 'Maria Santos',
      company: 'Digital Agency',
      email: 'maria@digital.com',
      phone: '11987654322',
      stage: 'prospecting' as const,
      value: 3500,
      probability: 15,
      source: 'Referral',
      notes: 'Referred by existing customer',
      created_at: '2026-02-09',
      position: 1,
    },
    {
      id: 'lead-3',
      name: 'Pedro Costa',
      company: 'StartUp XYZ',
      email: 'pedro@startupxyz.com',
      phone: '11987654323',
      stage: 'prospecting' as const,
      value: 8000,
      probability: 25,
      source: 'Cold Call',
      notes: 'Warm lead, needs development',
      created_at: '2026-02-08',
      position: 2,
    },
    {
      id: 'lead-4',
      name: 'Ana Oliveira',
      company: 'Commerce Co',
      email: 'ana@commerce.com',
      phone: '11987654324',
      stage: 'prospecting' as const,
      value: 12000,
      probability: 30,
      source: 'Website',
      notes: 'Filled contact form, hot lead',
      created_at: '2026-02-07',
      position: 3,
    },
    {
      id: 'lead-5',
      name: 'Carlos Ferreira',
      company: 'Supply Inc',
      email: 'carlos@supply.com',
      phone: '11987654325',
      stage: 'prospecting' as const,
      value: 4500,
      probability: 20,
      source: 'Event',
      notes: 'Met at trade show',
      created_at: '2026-02-06',
      position: 4,
    },
    {
      id: 'lead-6',
      name: 'Lucia Martins',
      company: 'Retail Group',
      email: 'lucia@retail.com',
      phone: '11987654326',
      stage: 'prospecting' as const,
      value: 6000,
      probability: 22,
      source: 'LinkedIn',
      notes: 'Connection request accepted',
      created_at: '2026-02-05',
      position: 5,
    },
    {
      id: 'lead-7',
      name: 'Roberto Lima',
      company: 'Logistics Pro',
      email: 'roberto@logpro.com',
      phone: '11987654327',
      stage: 'prospecting' as const,
      value: 7500,
      probability: 28,
      source: 'Referral',
      notes: 'Good fit for services',
      created_at: '2026-02-04',
      position: 6,
    },
    {
      id: 'lead-8',
      name: 'Fernanda Costa',
      company: 'Finance Corp',
      email: 'fernanda@finance.com',
      phone: '11987654328',
      stage: 'prospecting' as const,
      value: 9000,
      probability: 25,
      source: 'Cold Call',
      notes: 'Budget approved Q1',
      created_at: '2026-02-03',
      position: 7,
    },
    {
      id: 'lead-9',
      name: 'Diego Santos',
      company: 'Media House',
      email: 'diego@media.com',
      phone: '11987654329',
      stage: 'prospecting' as const,
      value: 5500,
      probability: 18,
      source: 'Website',
      notes: 'Downloaded pricing',
      created_at: '2026-02-02',
      position: 8,
    },
    {
      id: 'lead-10',
      name: 'Beatriz Silva',
      company: 'Consulting Group',
      email: 'beatriz@consulting.com',
      phone: '11987654330',
      stage: 'prospecting' as const,
      value: 11000,
      probability: 32,
      source: 'Referral',
      notes: 'Strong recommendation',
      created_at: '2026-02-01',
      position: 9,
    },
    {
      id: 'lead-11',
      name: 'Ricardo Gomes',
      company: 'Tech Innovate',
      email: 'ricardo@innovate.com',
      phone: '11987654331',
      stage: 'prospecting' as const,
      value: 4200,
      probability: 15,
      source: 'LinkedIn',
      notes: 'Early interest phase',
      created_at: '2026-01-31',
      position: 10,
    },
    {
      id: 'lead-12',
      name: 'Juliana Rocha',
      company: 'Enterprise Solutions',
      email: 'juliana@enterprise.com',
      phone: '11987654332',
      stage: 'prospecting' as const,
      value: 15000,
      probability: 35,
      source: 'Event',
      notes: 'Decision maker engaged',
      created_at: '2026-01-30',
      position: 11,
    },

    // Qualificação (5 leads)
    {
      id: 'lead-13',
      name: 'Marcos Alves',
      company: 'Builder Corp',
      email: 'marcos@builder.com',
      phone: '11987654333',
      stage: 'qualification' as const,
      value: 8500,
      probability: 50,
      source: 'Referral',
      notes: 'Needs assessment completed',
      created_at: '2026-01-29',
      position: 0,
    },
    {
      id: 'lead-14',
      name: 'Camila Ribeiro',
      company: 'Fashion Brand',
      email: 'camila@fashion.com',
      phone: '11987654334',
      stage: 'qualification' as const,
      value: 6000,
      probability: 45,
      source: 'Cold Call',
      notes: 'Requirements gathering in progress',
      created_at: '2026-01-28',
      position: 1,
    },
    {
      id: 'lead-15',
      name: 'Thiago Oliveira',
      company: 'Healthcare Inc',
      email: 'thiago@health.com',
      phone: '11987654335',
      stage: 'qualification' as const,
      value: 18000,
      probability: 55,
      source: 'Website',
      notes: 'Compliance requirements identified',
      created_at: '2026-01-27',
      position: 2,
    },
    {
      id: 'lead-16',
      name: 'Isabela Mendes',
      company: 'Education Plus',
      email: 'isabela@eduplus.com',
      phone: '11987654336',
      stage: 'qualification' as const,
      value: 7500,
      probability: 48,
      source: 'Referral',
      notes: 'Budget confirmed',
      created_at: '2026-01-26',
      position: 3,
    },
    {
      id: 'lead-17',
      name: 'Victor Pereira',
      company: 'Manufacturing Pro',
      email: 'victor@manufact.com',
      phone: '11987654337',
      stage: 'qualification' as const,
      value: 22000,
      probability: 60,
      source: 'LinkedIn',
      notes: 'Strong fit identified',
      created_at: '2026-01-25',
      position: 4,
    },

    // Proposta (3 leads)
    {
      id: 'lead-18',
      name: 'Gabriela Torres',
      company: 'Energy Corp',
      email: 'gabriela@energy.com',
      phone: '11987654338',
      stage: 'proposal' as const,
      value: 14000,
      probability: 70,
      source: 'Referral',
      notes: 'Proposal sent, awaiting feedback',
      created_at: '2026-01-24',
      position: 0,
    },
    {
      id: 'lead-19',
      name: 'Leonardo Alves',
      company: 'Water Systems',
      email: 'leonardo@water.com',
      phone: '11987654339',
      stage: 'proposal' as const,
      value: 9500,
      probability: 65,
      source: 'Cold Call',
      notes: 'Demo scheduled',
      created_at: '2026-01-23',
      position: 1,
    },
    {
      id: 'lead-20',
      name: 'Patricia Gama',
      company: 'Telecom Global',
      email: 'patricia@telecom.com',
      phone: '11987654340',
      stage: 'proposal' as const,
      value: 20000,
      probability: 75,
      source: 'Website',
      notes: 'Proposal revision requested',
      created_at: '2026-01-22',
      position: 2,
    },

    // Negociação (2 leads)
    {
      id: 'lead-21',
      name: 'Anderson Cruz',
      company: 'Payment Systems',
      email: 'anderson@payment.com',
      phone: '11987654341',
      stage: 'negotiation' as const,
      value: 16000,
      probability: 80,
      source: 'Referral',
      notes: 'Contract review in progress',
      created_at: '2026-01-21',
      position: 0,
    },
    {
      id: 'lead-22',
      name: 'Vanessa Silva',
      company: 'Insurance Plus',
      email: 'vanessa@insurance.com',
      phone: '11987654342',
      stage: 'negotiation' as const,
      value: 12500,
      probability: 85,
      source: 'LinkedIn',
      notes: 'Terms discussion scheduled',
      created_at: '2026-01-20',
      position: 1,
    },

    // Fechado (4 leads)
    {
      id: 'lead-23',
      name: 'Rafael Santos',
      company: 'Cloud Providers',
      email: 'rafael@cloud.com',
      phone: '11987654343',
      stage: 'closed_won' as const,
      value: 19000,
      probability: 100,
      source: 'Referral',
      notes: 'Contract signed',
      created_at: '2026-01-19',
      position: 0,
    },
    {
      id: 'lead-24',
      name: 'Sophia Costa',
      company: 'Real Estate Co',
      email: 'sophia@realestate.com',
      phone: '11987654344',
      stage: 'closed_won' as const,
      value: 13500,
      probability: 100,
      source: 'Cold Call',
      notes: 'Implementation started',
      created_at: '2026-01-18',
      position: 1,
    },
  ] as SalesLead[],
};

export function formatCurrency(value: number): string {
  return new Intl.NumberFormat('pt-BR', {
    style: 'currency',
    currency: 'BRL',
  }).format(value);
}

export function calculateTotalByStage(leads: SalesLead[], stage: string): number {
  return leads.filter((l) => l.stage === stage).reduce((sum, l) => sum + l.value, 0);
}

export function calculateConversionRate(leads: SalesLead[], fromStage: string, toStage: string): number {
  const from = leads.filter((l) => l.stage === fromStage).length;
  const to = leads.filter((l) => l.stage === toStage).length;
  return from > 0 ? (to / from) * 100 : 0;
}

export function getRealized(leads: SalesLead[]): number {
  return leads
    .filter((l) => l.stage === 'closed_won')
    .reduce((sum, l) => sum + l.value, 0);
}

export function getPipelineTotal(leads: SalesLead[]): number {
  return leads.reduce((sum, l) => sum + l.value, 0);
}

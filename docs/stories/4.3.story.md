# 4.3: Dashboard Financeiro

**Status:** Ready
**Sprint:** 6
**Points:** 8
**Epic:** EPIC-004

---

## User Story

**Como** empresário
**Quero** ver métricas financeiras (receita, despesa, saldo, contas) ao clicar em "Financeiro"
**Para que** eu tenha visibilidade rápida da saúde financeira da empresa

---

## Description

Implementar dashboard financeiro com:
- Card de saldo atual (destaque grande)
- Receita vs Despesa (gráfico bar 6 meses)
- Contas a pagar/receber (listas)
- Fluxo de caixa projetado (3 meses)
- DRE simplificada

Usar dados mockados + Recharts para gráficos.

---

## Acceptance Criteria

### AC-403.1: Modal abre ao clicar em "Financeiro"
- [ ] Drawer/modal aparece com animação
- [ ] Título: "FINANCEIRO"
- [ ] Botão X fecha

### AC-403.2: Saldo Atual (card destaque)
- [ ] Grande, em verde (#10B981)
- [ ] Formato: R$ XX.XXX,XX
- [ ] Atualiza em tempo real se integrado

### AC-403.3: Receita vs Despesa (gráfico)
- [ ] Bar chart Recharts
- [ ] Últimos 6 meses
- [ ] Cores: Verde (receita), Vermelho (despesa)
- [ ] Legenda + tooltips
- [ ] Responsivo

### AC-403.4: Contas a Pagar
- [ ] Lista com: descrição, valor, data vencimento
- [ ] Ordenar por data (mais próximas primeiro)
- [ ] Alertar se passada (vermelho)
- [ ] Max 5 itens visíveis (scroll se mais)

### AC-403.5: Contas a Receber
- [ ] Similar a contas a pagar
- [ ] Cores diferentes (azul ao invés de vermelho)

### AC-403.6: Fluxo de Caixa Projetado
- [ ] Line chart (próximos 3 meses)
- [ ] Projection simples (last month * 1.1)
- [ ] Color: Indigo (#6366F1)

### AC-403.7: DRE Simplificada
- [ ] Receita Total - Custos - Despesas = Lucro
- [ ] Mostrar como cards em linha
- [ ] Porcentagem de margem

### AC-403.8: Filtro por período
- [ ] Dropdown: Mês / Trimestre / Ano
- [ ] Atualiza todos os gráficos
- [ ] Default: Mês atual

### AC-403.9: Sem erros, responsivo
- [ ] Mobile: Stack vertical
- [ ] Tablet: 2 colunas
- [ ] Desktop: Layout 3-coluna

---

## Scope

### IN
- Dashboard layout
- 4 gráficos/cards (saldo, receita/despesa, contas, fluxo)
- DRE cards
- Filtro período
- Mock data

### OUT
- Real-time data sync (phase 2 com Supabase)
- Exportar para PDF (phase 2)
- Bulk operations
- Advanced filtering

---

## Technical Notes

### Data Structure
```typescript
interface FinancialData {
  balance: number;
  monthlyRevenue: Array<{ month: string; revenue: number; expense: number }>;
  accountsPayable: Array<{ id: string; description: string; amount: number; dueDate: string }>;
  accountsReceivable: Array<{ id: string; description: string; amount: number; dueDate: string }>;
  cashFlow: Array<{ month: string; amount: number }>;
}
```

### Components
```
FinancialDashboard.tsx
├── BalanceCard
├── RevenueVsExpenseChart
├── AccountsPayable
├── AccountsReceivable
├── CashFlowChart
├── DRECards
└── PeriodFilter
```

### Mock Data
```typescript
src/data/financialData.ts
- 6 months revenue/expense history
- 10 contas a pagar
- 5 contas a receber
- 3 months cash flow projection
```

---

## Dependencies

**Depends On:** US-402 (Drawer/Modal component)
**Blocks:** None (parallel with US-404, US-405, US-406)

---

## Definition of Done

- [x] All charts render correctly
- [x] All AC passed
- [x] Mobile responsive
- [x] No console errors
- [x] Tests written for data formatting
- [x] Lighthouse Performance > 85

---

## File List

- [ ] src/components/corporate/dashboards/FinancialDashboard.tsx
- [ ] src/components/corporate/dashboards/cards/BalanceCard.tsx
- [ ] src/components/corporate/dashboards/charts/RevenueVsExpenseChart.tsx
- [ ] src/data/financialData.ts
- [ ] src/__tests__/financialDashboard.test.ts

---

## Change Log

- **2026-02-17:** Created

---

## Points Breakdown

- Layout + cards: 2 pts
- Recharts integration: 2 pts
- Filters: 1 pt
- Responsivity: 1.5 pts
- Polish + tests: 1.5 pts

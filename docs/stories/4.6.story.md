# 4.6: Dashboard Operacional (Kanban de Tarefas)

**Status:** Ready
**Sprint:** 7
**Points:** 8
**Epic:** EPIC-004

---

## User Story

**Como** gerente operacional
**Quero** gerenciar minhas tarefas em um Kanban com 3 colunas
**Para que** eu tenha visibilidade do progresso operacional

---

## Description

Implementar dashboard operacional com:
- Kanban board: A Fazer | Em Progresso | ConcluÃ­do
- Drag & drop entre colunas
- Criar novas tarefas (form)
- Prioridades (Alta/MÃ©dia/Baixa com cores)
- Datas de vencimento com alertas
- Filtro por prioridade
- 50+ tarefas em mock data

---

## Acceptance Criteria

### AC-406.1: Kanban com 3 Colunas
- [ ] A Fazer | Em Progresso | ConcluÃ­do
- [ ] Contador de tarefas por coluna
- [ ] Header mostra tÃ­tulo + contagem
- [ ] Background distinto para cada coluna

### AC-406.2: Drag & Drop Tarefas
- [ ] Task card arrastÃ¡vel entre colunas
- [ ] Atualiza status ao soltar
- [ ] AnimaÃ§Ã£o durante drag
- [ ] Drop zone visual (highlight)
- [ ] Undo para Ãºltima aÃ§Ã£o

### AC-406.3: Task Cards
- [ ] TÃ­tulo da tarefa
- [ ] DescriÃ§Ã£o (primeira linha visÃ­vel)
- [ ] Badge prioridade: ðŸ”´ Alta, ðŸŸ¡ MÃ©dia, ðŸŸ¢ Baixa
- [ ] Data de vencimento (com alerta se passada)
- [ ] ResponsÃ¡vel (avatar + nome)
- [ ] Clique expande detalhes

### AC-406.4: Criar Nova Tarefa
- [ ] BotÃ£o "+ Nova Tarefa"
- [ ] Form modal: tÃ­tulo, descriÃ§Ã£o, prioridade, responsÃ¡vel, data vencimento
- [ ] Salva como "A Fazer"
- [ ] Task aparece no topo da coluna

### AC-406.5: Editar/Deletar Tarefas
- [ ] Clique em task abre editor
- [ ] Pode editar todos os campos
- [ ] BotÃ£o Deletar com confirmaÃ§Ã£o
- [ ] Deletar remove da coluna

### AC-406.6: Filtro por Prioridade
- [ ] Dropdown: Todas | Alta | MÃ©dia | Baixa
- [ ] Esconde tarefas nÃ£o selecionadas
- [ ] Contador atualiza

### AC-406.7: Alerta de Vencimento
- [ ] Tarefa vencida (data passada): border vermelha
- [ ] Vence hoje: border amarela
- [ ] Vence em 3 dias: border laranja
- [ ] Tooltip mostra "Vence em X dias"

### AC-406.8: Detalhes da Tarefa
- [ ] Modal/drawer com todos os campos
- [ ] EdiÃ§Ã£o inline
- [ ] HistÃ³rico de mudanÃ§as (data/hora)
- [ ] Status atualiza em tempo real

### AC-406.9: Responsividade
- [ ] Desktop: 3 colunas lado a lado
- [ ] Tablet: 2 colunas + scroll
- [ ] Mobile: 1 coluna com tabs

---

## Scope

### IN
- Kanban 3 colunas
- CRUD tarefas
- Drag & drop (react-beautiful-dnd)
- Prioridades + datas
- Filtros
- 50+ mock tasks

### OUT
- Real-time Supabase sync
- Assign to multiple users
- Time tracking
- Recurring tasks
- Webhooks/Slack integration
- Advanced filtering (tag-based)

---

## Technical Notes

### Data Structure
```typescript
interface OperationalTask {
  id: string;
  user_id: string;
  title: string;
  description: string;
  status: 'todo' | 'in_progress' | 'done';
  priority: 'high' | 'medium' | 'low';
  assignee?: string;
  due_date?: Date;
  completed_at?: Date;
  position: number; // order in column
  created_at: Date;
  updated_at: Date;
}
```

### Components
```
OperationalDashboard.tsx
â”œâ”€â”€ KanbanBoard
â”œâ”€â”€ KanbanColumn (x3)
â”œâ”€â”€ TaskCard (draggable)
â”œâ”€â”€ NewTaskForm
â”œâ”€â”€ TaskDetailsModal
â””â”€â”€ PriorityFilter
```

### Libraries
- **react-beautiful-dnd:** ^3.13.0 (install)
- **date-fns:** Date utilities

### State Management
- VirtualOfficeContext.tasks
- Local state para drag feedback + filter

---

## Dependencies

**Depends On:** US-402 (Modal)
**Blocks:** None

**Library Dependency:** react-beautiful-dnd (install in npm)

---

## Definition of Done

- [x] Kanban fully functional
- [x] All AC passed
- [x] Drag & drop smooth (no jank)
- [x] Performance: < 500ms even with 200 tasks
- [x] Mobile responsive
- [x] Form validation
- [x] No console errors
- [x] Tests 80%+ coverage
- [x] Accessibility: keyboard nav

---

## File List

- [ ] src/components/corporate/dashboards/OperationalDashboard.tsx
- [ ] src/components/corporate/dashboards/operational/KanbanBoard.tsx
- [ ] src/components/corporate/dashboards/operational/KanbanColumn.tsx
- [ ] src/components/corporate/dashboards/operational/TaskCard.tsx
- [ ] src/components/corporate/dashboards/forms/NewTaskForm.tsx
- [ ] src/data/operationalData.ts
- [ ] src/__tests__/operationalDashboard.test.ts

---

## Points Breakdown

- Kanban setup: 2 pts
- Drag & drop: 2 pts
- CRUD tasks: 1.5 pts
- Filters + alerts: 1 pt
- Responsivity + tests: 1.5 pts

---

## Change Log

- **2026-02-17:** Created
